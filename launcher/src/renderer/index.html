<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'">
    <title>Miyao Launcher</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Setup Wizard (First Run) -->
    <div id="setup-wizard" class="setup-wizard hidden">
        <div class="setup-container">
            <div class="setup-header">
                <div class="logo">
                    <span class="logo-icon">üéµ</span>
                    <h1>Miyao Launcher</h1>
                </div>
                <p class="setup-subtitle">Thi·∫øt l·∫≠p ban ƒë·∫ßu</p>
            </div>

            <!-- Step 1: Requirements Check -->
            <div class="setup-step" id="step-requirements">
                <h2>üîç Ki·ªÉm tra y√™u c·∫ßu h·ªá th·ªëng</h2>
                <p class="step-description">ƒêang ki·ªÉm tra c√°c y√™u c·∫ßu c·∫ßn thi·∫øt ƒë·ªÉ ch·∫°y Miyao Bot...</p>
                
                <div class="requirements-list">
                    <div class="requirement-item" id="req-node">
                        <span class="req-icon">‚è≥</span>
                        <div class="req-info">
                            <span class="req-name">Node.js</span>
                            <span class="req-version">Phi√™n b·∫£n y√™u c·∫ßu: ‚â• 20.0.0</span>
                        </div>
                        <span class="req-status">ƒêang ki·ªÉm tra...</span>
                    </div>
                    <div class="requirement-item" id="req-java">
                        <span class="req-icon">‚è≥</span>
                        <div class="req-info">
                            <span class="req-name">Java (cho Lavalink)</span>
                            <span class="req-version">Phi√™n b·∫£n y√™u c·∫ßu: ‚â• 17</span>
                        </div>
                        <span class="req-status">ƒêang ki·ªÉm tra...</span>
                    </div>
                    <div class="requirement-item" id="req-npm">
                        <span class="req-icon">‚è≥</span>
                        <div class="req-info">
                            <span class="req-name">npm</span>
                            <span class="req-version">Qu·∫£n l√Ω g√≥i Node.js</span>
                        </div>
                        <span class="req-status">ƒêang ki·ªÉm tra...</span>
                    </div>
                </div>

                <div class="requirements-result hidden" id="requirements-result">
                    <div class="result-message"></div>
                </div>

                <div class="setup-actions">
                    <button class="btn btn-primary" id="btn-check-requirements">Ki·ªÉm tra l·∫°i</button>
                    <button class="btn btn-success" id="btn-next-step" disabled>Ti·∫øp t·ª•c</button>
                </div>
            </div>

            <!-- Step 2: Select Bot Directory -->
            <div class="setup-step hidden" id="step-select-directory">
                <h2>üìÅ Ch·ªçn th∆∞ m·ª•c Miyao Bot</h2>
                <p class="step-description">Ch·ªçn th∆∞ m·ª•c ch·ª©a m√£ ngu·ªìn Miyao Bot (phi√™n b·∫£n ‚â• 1.4.0)</p>
                
                <div class="directory-select">
                    <div class="directory-path" id="selected-path">
                        <span class="path-placeholder">Ch∆∞a ch·ªçn th∆∞ m·ª•c</span>
                    </div>
                    <button class="btn btn-secondary" id="btn-browse">Duy·ªát...</button>
                </div>

                <div class="directory-validation hidden" id="directory-validation">
                    <div class="validation-message"></div>
                </div>

                <div class="setup-actions">
                    <button class="btn btn-secondary" id="btn-back-step">Quay l·∫°i</button>
                    <button class="btn btn-success" id="btn-finish-setup" disabled>Ho√†n t·∫•t</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app hidden">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üéµ</span>
                    <span class="logo-text">Miyao</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="lavalink">
                    <span class="nav-icon">üéõÔ∏è</span>
                    <span class="nav-text">Lavalink</span>
                    <span class="status-dot" id="lavalink-status-dot"></span>
                </button>
                <button class="nav-item" data-tab="bot">
                    <span class="nav-icon">ü§ñ</span>
                    <span class="nav-text">Bot</span>
                    <span class="status-dot" id="bot-status-dot"></span>
                </button>
                <button class="nav-item" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">C√†i ƒë·∫∑t</span>
                </button>
                <button class="nav-item" data-tab="info">
                    <span class="nav-icon">‚ÑπÔ∏è</span>
                    <span class="nav-text">Th√¥ng tin</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="bot-path-info">
                    <span class="path-label">ƒê∆∞·ªùng d·∫´n Bot:</span>
                    <span class="path-value" id="current-bot-path" title="">...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Lavalink Tab -->
            <section class="tab-content active" id="tab-lavalink">
                <div class="tab-header">
                    <h1>üéõÔ∏è Lavalink Server</h1>
                    <div class="status-badge" id="lavalink-status-badge">
                        <span class="status-indicator"></span>
                        <span class="status-text">ƒê√£ d·ª´ng</span>
                    </div>
                </div>

                <div class="tab-body">
                    <div class="control-panel">
                        <div class="control-buttons">
                            <button class="btn btn-success btn-lg" id="btn-start-lavalink">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span class="btn-text">Kh·ªüi ƒë·ªông Lavalink</span>
                            </button>
                            <button class="btn btn-danger btn-lg" id="btn-stop-lavalink" disabled>
                                <span class="btn-icon">‚èπÔ∏è</span>
                                <span class="btn-text">D·ª´ng Lavalink</span>
                            </button>
                        </div>
                        <div class="control-info">
                            <p>Lavalink l√† server √¢m thanh c·∫ßn thi·∫øt ƒë·ªÉ bot ph√°t nh·∫°c.</p>
                            <p>H√£y kh·ªüi ƒë·ªông Lavalink tr∆∞·ªõc khi ch·∫°y Bot.</p>
                        </div>
                    </div>

                    <div class="terminal-container">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <span class="terminal-dot red"></span>
                                <span class="terminal-dot yellow"></span>
                                <span class="terminal-dot green"></span>
                            </div>
                            <span class="terminal-title">üìü Lavalink Terminal</span>
                            <button class="btn btn-sm btn-secondary" id="btn-clear-lavalink-terminal">X√≥a</button>
                        </div>
                        <div class="terminal-output" id="lavalink-terminal">
                            <div class="terminal-welcome">Ch∆∞a c√≥ output. Nh·∫•n "Kh·ªüi ƒë·ªông Lavalink" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bot Tab -->
            <section class="tab-content" id="tab-bot">
                <div class="tab-header">
                    <h1>ü§ñ Discord Bot</h1>
                    <div class="status-badge" id="bot-status-badge">
                        <span class="status-indicator"></span>
                        <span class="status-text">ƒê√£ d·ª´ng</span>
                    </div>
                </div>

                <div class="tab-body">
                    <div class="control-panel">
                        <div class="control-buttons">
                            <button class="btn btn-success btn-lg" id="btn-start-bot">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span class="btn-text">Kh·ªüi ƒë·ªông Bot</span>
                            </button>
                            <button class="btn btn-danger btn-lg" id="btn-stop-bot" disabled>
                                <span class="btn-icon">‚èπÔ∏è</span>
                                <span class="btn-text">D·ª´ng Bot</span>
                            </button>
                            <button class="btn btn-primary btn-lg" id="btn-deploy-commands">
                                <span class="btn-icon">üöÄ</span>
                                <span class="btn-text">Deploy Commands</span>
                            </button>
                        </div>
                        <div class="control-info">
                            <p>‚ö†Ô∏è Khuy·∫øn ngh·ªã: Kh·ªüi ƒë·ªông Lavalink tr∆∞·ªõc khi ch·∫°y Bot.</p>
                            <p>Deploy Commands: ƒêƒÉng k√Ω/c·∫≠p nh·∫≠t slash commands l√™n Discord.</p>
                        </div>
                    </div>

                    <div class="terminal-container">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <span class="terminal-dot red"></span>
                                <span class="terminal-dot yellow"></span>
                                <span class="terminal-dot green"></span>
                            </div>
                            <span class="terminal-title">üìü Bot Terminal</span>
                            <button class="btn btn-sm btn-secondary" id="btn-clear-bot-terminal">X√≥a</button>
                        </div>
                        <div class="terminal-output" id="bot-terminal">
                            <div class="terminal-welcome">Ch∆∞a c√≥ output. Nh·∫•n "Kh·ªüi ƒë·ªông Bot" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Tab -->
            <section class="tab-content" id="tab-settings">
                <div class="tab-header">
                    <h1>‚öôÔ∏è C√†i ƒë·∫∑t</h1>
                </div>

                <div class="tab-body settings-body">
                    <!-- .env Settings Section -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h2>üìù C√†i ƒë·∫∑t .env</h2>
                            <p>Ch·ªânh s·ª≠a file c·∫•u h√¨nh .env c·ªßa bot</p>
                        </div>
                        
                        <div class="env-editor-container">
                            <div class="env-editor-toolbar">
                                <button class="btn btn-secondary" id="btn-reload-env">
                                    <span>üîÑ</span> T·∫£i l·∫°i
                                </button>
                                <button class="btn btn-success" id="btn-save-env">
                                    <span>üíæ</span> L∆∞u thay ƒë·ªïi
                                </button>
                            </div>
                            <div class="env-editor-status" id="env-editor-status"></div>
                            <textarea class="env-editor" id="env-editor" placeholder="ƒêang t·∫£i file .env..."></textarea>
                            <div class="env-editor-hint">
                                <p>üí° M·∫πo: C√°c d√≤ng b·∫Øt ƒë·∫ßu b·∫±ng # l√† comment v√† s·∫Ω b·ªã b·ªè qua.</p>
                                <p>‚ö†Ô∏è L∆∞u √Ω: Kh·ªüi ƒë·ªông l·∫°i bot sau khi thay ƒë·ªïi c·∫•u h√¨nh ƒë·ªÉ √°p d·ª•ng.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Bot Directory Section -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h2>üìÅ ƒê∆∞·ªùng d·∫´n th∆∞ m·ª•c Bot</h2>
                            <p>Thay ƒë·ªïi ƒë∆∞·ªùng d·∫´n ƒë·∫øn th∆∞ m·ª•c ch·ª©a Miyao Bot</p>
                        </div>
                        
                        <div class="directory-settings">
                            <div class="current-directory">
                                <span class="label">ƒê∆∞·ªùng d·∫´n hi·ªán t·∫°i:</span>
                                <span class="value" id="settings-bot-path">...</span>
                            </div>
                            <button class="btn btn-primary" id="btn-change-directory">
                                <span>üìÇ</span> Thay ƒë·ªïi ƒë∆∞·ªùng d·∫´n
                            </button>
                            <div class="directory-note">
                                <p>Y√™u c·∫ßu: Miyao Bot phi√™n b·∫£n ‚â• 1.4.0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Info Tab -->
            <section class="tab-content" id="tab-info">
                <div class="tab-header">
                    <h1>‚ÑπÔ∏è Th√¥ng tin</h1>
                </div>

                <div class="tab-body info-body">
                    <!-- Launcher Info -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <span class="info-icon">üöÄ</span>
                            <h2>Miyao Launcher</h2>
                        </div>
                        <div class="info-card-body">
                            <div class="info-row">
                                <span class="info-label">Phi√™n b·∫£n:</span>
                                <span class="info-value" id="launcher-version">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">M√£ build:</span>
                                <span class="info-value" id="launcher-build">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">T√™n m√£:</span>
                                <span class="info-value" id="launcher-codename">...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bot Info -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <span class="info-icon">ü§ñ</span>
                            <h2>Miyao Bot</h2>
                        </div>
                        <div class="info-card-body">
                            <div class="info-row">
                                <span class="info-label">Phi√™n b·∫£n:</span>
                                <span class="info-value" id="bot-version">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">M√£ build:</span>
                                <span class="info-value" id="bot-build">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">T√™n m√£:</span>
                                <span class="info-value" id="bot-codename">...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Ng√†y ph√°t h√†nh:</span>
                                <span class="info-value" id="bot-release-date">...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Credits -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <span class="info-icon">üíù</span>
                            <h2>Credits</h2>
                        </div>
                        <div class="info-card-body">
                            <div class="info-row">
                                <span class="info-label">Ph√°t tri·ªÉn b·ªüi:</span>
                                <span class="info-value">Tr·∫ßn Tu·∫•n Kh∆∞∆°ng</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Framework:</span>
                                <span class="info-value">Electron</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">License:</span>
                                <span class="info-value">MIT</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Toast Notifications Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text">ƒêang x·ª≠ l√Ω...</p>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
