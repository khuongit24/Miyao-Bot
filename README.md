# ğŸµ Miyao Music Bot

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D20.0.0-brightgreen)](https://nodejs.org/)
[![Discord.js](https://img.shields.io/badge/discord.js-v14-blue)](https://discord.js.org/)
[![Version](https://img.shields.io/badge/version-1.8.0-blue)](https://github.com/khuongit24/Miyao-Bot)

**Miyao Music Bot** lÃ  má»™t Discord Music Bot máº¡nh máº½, Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i Discord.js v14 vÃ  Lavalink, há»— trá»£ phÃ¡t nháº¡c tá»« nhiá»u nguá»“n khÃ¡c nhau nhÆ° YouTube, Spotify, SoundCloud vÃ  nhiá»u hÆ¡n ná»¯a.

> ğŸ“š *MÃ£ nguá»“n Ä‘Æ°á»£c cÃ´ng khai vá»›i má»¥c Ä‘Ã­ch há»c táº­p vÃ  tham kháº£o.*

---

## ğŸ“‹ Má»¥c lá»¥c

- [âœ¨ TÃ­nh nÄƒng](#-tÃ­nh-nÄƒng)
- [ğŸ“¦ YÃªu cáº§u há»‡ thá»‘ng](#-yÃªu-cáº§u-há»‡-thá»‘ng)
- [ğŸš€ CÃ i Ä‘áº·t](#-cÃ i-Ä‘áº·t)
- [âš™ï¸ Cáº¥u hÃ¬nh](#ï¸-cáº¥u-hÃ¬nh)
- [ğŸ® Danh sÃ¡ch lá»‡nh](#-danh-sÃ¡ch-lá»‡nh)
- [ğŸ“ Cáº¥u trÃºc dá»± Ã¡n](#-cáº¥u-trÃºc-dá»±-Ã¡n)
- [ğŸ› ï¸ PhÃ¡t triá»ƒn](#ï¸-phÃ¡t-triá»ƒn)
- [ğŸ¤ ÄÃ³ng gÃ³p](#-Ä‘Ã³ng-gÃ³p)
- [ğŸ“„ Giáº¥y phÃ©p](#-giáº¥y-phÃ©p)

---

## âœ¨ TÃ­nh nÄƒng

### ğŸ¶ PhÃ¡t nháº¡c
- PhÃ¡t nháº¡c tá»« **YouTube**, **Spotify**, **SoundCloud**, **Bandcamp**, **Twitch**, **Vimeo**
- Há»— trá»£ tÃ¬m kiáº¿m vÃ  phÃ¡t playlist
- Äiá»u khiá»ƒn phÃ¡t nháº¡c: play, pause, resume, skip, stop, seek
- Äiá»u chá»‰nh Ã¢m lÆ°á»£ng (0-100%)

### ğŸ“œ Quáº£n lÃ½ hÃ ng Ä‘á»£i
- Xem danh sÃ¡ch hÃ ng Ä‘á»£i vá»›i phÃ¢n trang
- XÃ¡o trá»™n (shuffle), láº·p láº¡i (loop) bÃ i hÃ¡t/playlist
- Di chuyá»ƒn, xÃ³a, nháº£y Ä‘áº¿n bÃ i hÃ¡t báº¥t ká»³
- XÃ³a toÃ n bá»™ hÃ ng Ä‘á»£i

### ğŸ›ï¸ Bá»™ lá»c Ã¢m thanh
- **12+ bá»™ lá»c**: bassboost, nightcore, vaporwave, 8D, karaoke, tremolo, vibrato, ...
- Cháº¿ Ä‘á»™ **Autoplay** - tá»± Ä‘á»™ng phÃ¡t bÃ i tÆ°Æ¡ng tá»± khi háº¿t hÃ ng Ä‘á»£i

### ğŸ“š Playlist & YÃªu thÃ­ch
- Táº¡o vÃ  quáº£n lÃ½ playlist cÃ¡ nhÃ¢n
- LÆ°u bÃ i hÃ¡t yÃªu thÃ­ch
- Import/Export playlist

### ğŸ” KhÃ¡m phÃ¡ nháº¡c
- TÃ¬m bÃ i hÃ¡t tÆ°Æ¡ng tá»±
- Xem trending music
- KhÃ¡m phÃ¡ nháº¡c má»›i
- Hiá»ƒn thá»‹ lá»i bÃ i hÃ¡t (lyrics)

### ğŸ“Š Thá»‘ng kÃª
- Thá»‘ng kÃª cÃ¡ nhÃ¢n vÃ  server
- Lá»‹ch sá»­ nghe nháº¡c
- Báº£ng xáº¿p háº¡ng (leaderboard)

### ğŸ¯ TÃ­nh nÄƒng khÃ¡c
- **Music Quiz** - TrÃ² chÆ¡i Ä‘oÃ¡n tÃªn bÃ i hÃ¡t
- **Context Menu** - Click chuá»™t pháº£i Ä‘á»ƒ thÃªm bÃ i hÃ¡t
- **Health Check** - GiÃ¡m sÃ¡t sá»©c khá»e há»‡ thá»‘ng
- **Metrics API** - Theo dÃµi hiá»‡u suáº¥t
- **Graceful Degradation** - Xá»­ lÃ½ lá»—i thÃ´ng minh

---

## ğŸ“¦ YÃªu cáº§u há»‡ thá»‘ng

| YÃªu cáº§u | PhiÃªn báº£n |
|---------|-----------|
| **Node.js** | â‰¥ 20.0.0 |
| **Java** | â‰¥ 17 (cho Lavalink) |
| **npm** | Äi kÃ¨m Node.js |
| **Lavalink** | â‰¥ 4.0.0 |

---

## ğŸš€ CÃ i Ä‘áº·t

### BÆ°á»›c 1: Clone repository

```bash
git clone https://github.com/khuongit24/Miyao-Bot.git
cd Miyao-Bot
```

### BÆ°á»›c 2: CÃ i Ä‘áº·t dependencies

**Linux/macOS:**
```bash
chmod +x install-unix.sh
./install-unix.sh
```

**Windows:**
```cmd
npm install
cd launcher && npm install && cd ..
```

**Hoáº·c cÃ i Ä‘áº·t thá»§ cÃ´ng:**
```bash
npm install
```

### BÆ°á»›c 3: Táº£i Lavalink

1. Táº£i [Lavalink.jar](https://github.com/lavalink-devs/Lavalink/releases) (phiÃªn báº£n má»›i nháº¥t)
2. Äáº·t file `Lavalink.jar` vÃ o thÆ° má»¥c gá»‘c cá»§a bot

### BÆ°á»›c 4: Cáº¥u hÃ¬nh

1. Táº¡o file `.env` tá»« template:
```bash
cp .env.example .env
```

2. Chá»‰nh sá»­a file `.env` vá»›i thÃ´ng tin cá»§a báº¡n:
```env
DISCORD_TOKEN=your_discord_bot_token
CLIENT_ID=your_bot_client_id
GUILD_ID=your_test_guild_id

# Spotify (tÃ¹y chá»n)
SPOTIFY_CLIENT_ID=your_spotify_client_id
SPOTIFY_CLIENT_SECRET=your_spotify_client_secret
```

### BÆ°á»›c 5: Deploy Commands

```bash
npm run deploy
```

### BÆ°á»›c 6: Khá»Ÿi Ä‘á»™ng

**Khá»Ÿi Ä‘á»™ng Lavalink:**
```bash
java -jar Lavalink.jar
```

**Khá»Ÿi Ä‘á»™ng Bot:**
```bash
npm start
```

**Hoáº·c sá»­ dá»¥ng Desktop Launcher:**
```bash
cd launcher
npm start
```

---

## âš™ï¸ Cáº¥u hÃ¬nh

### File `.env`

| Biáº¿n | MÃ´ táº£ | Báº¯t buá»™c |
|------|-------|----------|
| `DISCORD_TOKEN` | Token cá»§a Discord Bot | âœ… |
| `CLIENT_ID` | Client ID cá»§a Bot | âœ… |
| `GUILD_ID` | Guild ID Ä‘á»ƒ test (development) | âŒ |
| `SPOTIFY_CLIENT_ID` | Spotify Client ID | âŒ |
| `SPOTIFY_CLIENT_SECRET` | Spotify Client Secret | âŒ |
| `NODE_ENV` | MÃ´i trÆ°á»ng (development/production) | âŒ |
| `LOG_LEVEL` | Má»©c Ä‘á»™ log (debug/info/warn/error) | âŒ |
| `CACHE_BUDGET_MB` | Dung lÆ°á»£ng cache (MB) | âŒ |

### File `src/config/config.json`

```json
{
  "bot": {
    "name": "Miyao",
    "prefix": "!",
    "color": "#FF69B4"
  },
  "music": {
    "defaultVolume": 50,
    "maxVolume": 100,
    "maxQueueSize": 100,
    "leaveOnEmpty": true,
    "leaveOnEmptyDelay": 300000
  },
  "lavalink": {
    "nodes": [{
      "name": "Main Node",
      "url": "127.0.0.1:2333",
      "auth": "youshallnotpass"
    }]
  }
}
```

> âš ï¸ **Báº£o máº­t**: Náº¿u triá»ƒn khai production, hÃ£y thay Ä‘á»•i máº­t kháº©u máº·c Ä‘á»‹nh `youshallnotpass` trong cáº£ `config.json` vÃ  `application.yml`.

### File `application.yml` (Lavalink)

File cáº¥u hÃ¬nh Lavalink Ä‘Ã£ Ä‘Æ°á»£c setup sáºµn vá»›i:
- YouTube plugin (youtube-plugin)
- LavaSrc plugin (Spotify, SoundCloud, Apple Music)
- CÃ¡c bá»™ lá»c Ã¢m thanh

---

## ğŸ® Danh sÃ¡ch lá»‡nh

### ğŸµ Nháº¡c (Music)
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/play <query>` | PhÃ¡t nháº¡c tá»« link hoáº·c tÃ¬m kiáº¿m |
| `/pause` | Táº¡m dá»«ng phÃ¡t nháº¡c |
| `/resume` | Tiáº¿p tá»¥c phÃ¡t nháº¡c |
| `/skip` | Bá» qua bÃ i hiá»‡n táº¡i |
| `/stop` | Dá»«ng phÃ¡t vÃ  xÃ³a hÃ ng Ä‘á»£i |
| `/nowplaying` | Xem bÃ i Ä‘ang phÃ¡t |
| `/seek <time>` | Tua Ä‘áº¿n thá»i Ä‘iá»ƒm |
| `/volume <0-100>` | Äiá»u chá»‰nh Ã¢m lÆ°á»£ng |

### ğŸ“œ HÃ ng Ä‘á»£i (Queue)
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/queue` | Xem hÃ ng Ä‘á»£i |
| `/shuffle` | XÃ¡o trá»™n hÃ ng Ä‘á»£i |
| `/loop <mode>` | Láº·p láº¡i (off/track/queue) |
| `/remove <position>` | XÃ³a bÃ i khá»i hÃ ng Ä‘á»£i |
| `/move <from> <to>` | Di chuyá»ƒn bÃ i trong hÃ ng Ä‘á»£i |
| `/jump <position>` | Nháº£y Ä‘áº¿n bÃ i |
| `/clear` | XÃ³a toÃ n bá»™ hÃ ng Ä‘á»£i |

### ğŸ›ï¸ Bá»™ lá»c (Filters)
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/filter <type>` | Ãp dá»¥ng bá»™ lá»c Ã¢m thanh |
| `/autoplay` | Báº­t/táº¯t autoplay |

### ğŸ“š Playlist
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/playlist create <name>` | Táº¡o playlist má»›i |
| `/playlist add <name>` | ThÃªm bÃ i vÃ o playlist |
| `/playlist play <name>` | PhÃ¡t playlist |
| `/playlist list` | Xem danh sÃ¡ch playlist |
| `/favorites` | Quáº£n lÃ½ bÃ i hÃ¡t yÃªu thÃ­ch |

### ğŸ” KhÃ¡m phÃ¡ (Discovery)
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/lyrics` | Xem lá»i bÃ i hÃ¡t |
| `/similar` | TÃ¬m bÃ i tÆ°Æ¡ng tá»± |
| `/trending` | Xem nháº¡c trending |
| `/discover` | KhÃ¡m phÃ¡ nháº¡c má»›i |

### ğŸ“Š Thá»‘ng kÃª (Stats)
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/stats` | Thá»‘ng kÃª bot |
| `/mystats` | Thá»‘ng kÃª cÃ¡ nhÃ¢n |
| `/serverstats` | Thá»‘ng kÃª server |
| `/history` | Lá»‹ch sá»­ nghe nháº¡c |
| `/leaderboard` | Báº£ng xáº¿p háº¡ng |

### ğŸ¯ KhÃ¡c
| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `/help` | Xem trá»£ giÃºp |
| `/ping` | Kiá»ƒm tra Ä‘á»™ trá»… |
| `/quiz` | ChÆ¡i Ä‘oÃ¡n tÃªn bÃ i hÃ¡t |
| `/feedback` | Gá»­i pháº£n há»“i |
| `/settings` | CÃ i Ä‘áº·t server |

---

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
Miyao-Bot/
â”œâ”€â”€ ğŸ“„ index.js              # Entry point
â”œâ”€â”€ ğŸ“„ package.json          # Dependencies & scripts
â”œâ”€â”€ ğŸ“„ application.yml       # Cáº¥u hÃ¬nh Lavalink
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ commands/         # Slash commands
â”‚   â”‚   â”œâ”€â”€ admin/           # Lá»‡nh quáº£n trá»‹
â”‚   â”‚   â”œâ”€â”€ discovery/       # Lá»‡nh khÃ¡m phÃ¡
â”‚   â”‚   â”œâ”€â”€ filters/         # Lá»‡nh bá»™ lá»c
â”‚   â”‚   â”œâ”€â”€ music/           # Lá»‡nh nháº¡c
â”‚   â”‚   â”œâ”€â”€ playlist/        # Lá»‡nh playlist
â”‚   â”‚   â”œâ”€â”€ queue/           # Lá»‡nh hÃ ng Ä‘á»£i
â”‚   â”‚   â”œâ”€â”€ settings/        # Lá»‡nh cÃ i Ä‘áº·t
â”‚   â”‚   â”œâ”€â”€ social/          # Lá»‡nh xÃ£ há»™i
â”‚   â”‚   â””â”€â”€ stats/           # Lá»‡nh thá»‘ng kÃª
â”‚   â”œâ”€â”€ ğŸ“ config/           # Cáº¥u hÃ¬nh bot
â”‚   â”œâ”€â”€ ğŸ“ database/         # Quáº£n lÃ½ SQLite
â”‚   â”œâ”€â”€ ğŸ“ events/           # Discord events
â”‚   â”œâ”€â”€ ğŸ“ music/            # Music Manager (Shoukaku)
â”‚   â”œâ”€â”€ ğŸ“ services/         # Services (cache, etc.)
â”‚   â”œâ”€â”€ ğŸ“ utils/            # Utilities & helpers
â”‚   â”œâ”€â”€ ğŸ“ api/              # Metrics API server
â”‚   â””â”€â”€ ğŸ“ scripts/          # Deploy scripts
â”œâ”€â”€ ğŸ“ launcher/             # Desktop Launcher (Electron)
â”œâ”€â”€ ğŸ“ plugins/              # Lavalink plugins
â”œâ”€â”€ ğŸ“ data/                 # Database files
â””â”€â”€ ğŸ“ logs/                 # Log files
```

---

## ğŸ› ï¸ PhÃ¡t triá»ƒn

### Scripts cÃ³ sáºµn

```bash
# Cháº¡y bot
npm start

# Cháº¡y vá»›i watch mode
npm run dev

# Deploy slash commands
npm run deploy

# XÃ³a commands
npm run clear-commands

# Cháº¡y tests
npm test

# Cháº¡y tests vá»›i coverage
npm run test:coverage

# Lint code
npm run lint

# Format code
npm run format
```

### Tech Stack

- **Runtime**: Node.js 20+
- **Discord Library**: discord.js v14
- **Audio**: Lavalink + Shoukaku
- **Database**: SQLite (better-sqlite3)
- **Logging**: Winston
- **Testing**: Jest
- **API**: Express.js

---

## ğŸ¤ ÄÃ³ng gÃ³p

Má»i Ä‘Ã³ng gÃ³p Ä‘á»u Ä‘Æ°á»£c hoan nghÃªnh! Vui lÃ²ng:

1. Fork repository
2. Táº¡o branch má»›i (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

---

## ğŸ“„ Giáº¥y phÃ©p

Dá»± Ã¡n Ä‘Æ°á»£c phÃ¡t hÃ nh dÆ°á»›i giáº¥y phÃ©p **MIT License**.

Xem file [LICENSE](LICENSE) Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

---

## ğŸ‘¤ TÃ¡c giáº£

**Tráº§n Tuáº¥n KhÆ°Æ¡ng** - [@khuongit24](https://github.com/khuongit24)

---

